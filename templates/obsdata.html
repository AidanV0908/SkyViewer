<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collect Observational Data</title>
</head>
<body>
    <h1>Step 2: Enter Observational Data</h1>
    <p>If you are interested in locating this satellite in the sky, some observational data is needed. If all you want is general information, 
        feel free to skip this page using the skip button below. Latitude and longitude are the geodetic latitudes and longitudes, and are provided
        by Google Maps.</p>
    <form action="/results" method="GET" onsubmit="return validateForm()">
        <input type="hidden" id="id_field" name="satelliteId" value = "{{satellite_id}}">
        <!-- Date, Time, Time Zone on the same row -->
        <fieldset>
            <legend>Observational Data</legend>
            <label for="date">Date:</label>
            <input type="date" id="date" name="date" placeholder="Date">
            <label for="Time">Time:</label>
            <input type="time" id="time" step="1" name="time" placeholder="Time">
            <label for="timezone">UTC (+/-):</label>
            <input type="number" name="timezone" id="timezone" placeholder="Time Zone" min="-12" max="14" step="0.5">
        </fieldset>

        <!-- Latitude and Longitude on the same row -->
        <fieldset>
            <legend>Geodetic Coordinates</legend>
            <label for="latitude">Latitude (Degrees):</label>
            <input type="number" name="latitude" id="latitude" placeholder="Latitude" min="-90" max = "90" step="0.0000001">
            <label for="longitude">Longitude (Degrees):</label>
            <input type="number" name="longitude" id="longitude" placeholder="Longitude" min="-180" max="180" step="0.0000001">
        </fieldset>

          <!-- Submit and Skip buttons -->
          <div class="buttons">
            <button type="submit">Submit</button>
            <!-- Skip button - dynamically construct the URL with JavaScript -->
            <button type="button" onclick="skipForm()">Skip</button>
        </div>
    </form>
    <a href="{{ url_for('SkyViewer') }}">Return</a>

    <script>
        function validateForm() {
          const date = document.getElementById("date").value;
          const time = document.getElementById("time").value;
          const timezone = document.getElementById("timezone").value;

          const latitude = document.getElementById("latitude").value;
          const longitude = document.getElementById("longitude").value;
          
          if (date === "" || time === "" || timezone == "" || latitude == "" || longitude == "") {
            alert("All fields must be filled out if submitting the form. Click skip if you want to skip.");
            return false; // Prevent form submission
          }
          return true; // Allow form submission
        }
    </script>

    <script>
        function skipForm() {
            // Get the value of the ID field
            var id = document.getElementById('id_field').value;

            // Redirect to the submit route with only the ID
            window.location.href = '/results?satelliteId=' + encodeURIComponent(id)
        }
    </script>
</body>
</html>
